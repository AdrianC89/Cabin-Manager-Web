<%- include("templates/header", { tituloWeb: 'Lista de Reservas' }) %>

<% function formatDate(dateString) {
    const date = new Date(dateString);
    const day = ('0' + date.getUTCDate()).slice(-2);
    const month = ('0' + (date.getUTCMonth() + 1)).slice(-2);
    const year = date.getUTCFullYear();
    return `${day}/${month}/${year}`;
} %>

<% function toISODate(dateString) {
    const [day, month, year] = dateString.split('/');
    return `${year}-${month}-${day}`;
} %>

<%- include("templates/table", {
    titulo: 'Listado de Reservas',
    encabezados: ['Número de Reserva', 'Fecha Inicio', 'Fecha Fin', 'Cliente DNI', 'Cabaña Número'],
    fieldMapping: {
        'Número de Reserva': 'numero_reserva',
        'Fecha Inicio': 'fecha_inicio',
        'Fecha Fin': 'fecha_fin',
        'Cliente DNI': 'cliente_dni',
        'Cabaña Número': 'cabana_numero'
    },
    datos: reservas.map(reserva => ({
        numero_reserva: reserva.numero_reserva,
        fecha_inicio: formatDate(reserva.fecha_inicio),
        fecha_fin: formatDate(reserva.fecha_fin),
        cliente_dni: reserva.cliente_dni,
        cabana_numero: reserva.cabana_numero
    })),
    entidad: 'reservas',
    idField: 'numero_reserva'
}) %>


<%- include("templates/footer") %>
